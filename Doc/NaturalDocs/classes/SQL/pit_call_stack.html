<!DOCTYPE html>

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge"><title>pit_call_stack</title><link rel="stylesheet" type="text/css" href="../../styles/main.css" /><script type="text/javascript" src="../../styles/main.js"></script><script type="text/javascript">NDLoader.LoadJS("Content", "../../styles/");</script></head>

<!-- Generated by Natural Docs, version 2.2 -->

<!-- saved from url=(0016)http://localhost -->

<body onload="NDLoader.OnLoad('Content');" class="NDPage NDContentPage">

<a name="Topic444"></a><div class="CTopic TClass LSQL first">
 <div class="CTitle">pit_call_stack</div>
 <div class="CBody"><p>Helper package to implement the Call Stack functionality for PIT.</p><p>Th call stack maintains the hierarchy of method calls along with the actually valid log settings and timing information on both the wall clock and the time spent within the actual method.</p><p>Log settings may differ between different methods because of the toggle functionality that allows specific methods to dynamically change the settings. If such a method is left, the original log settings are restored.</p><div class="CHeading">Author</div><p>Juergen Sieben, ConDeS GmbH</p><p>Published under MIT licence</p></div>
</div>

<a name="Types"></a><a name="Topic445"></a><div class="CTopic TGroup LSQL">
 <div class="CTitle">Types</div>
</div>

<a name="pit_call_stack_tab"></a><a name="Topic446"></a><div class="CTopic TType LSQL">
 <div class="CTitle">pit_call_stack_tab</div>
 <div class="CBody"><p>Type to store a list of <a href="../../index.html#File:core/types/pit_call_stack_type.tps:pit_call_stack_type" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,122);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >pit_call_stack_type</a> instances. Indexed by binary_integer.</p></div>
</div>

<a name="Functions"></a><a name="Topic447"></a><div class="CTopic TGroup LSQL">
 <div class="CTitle">Functions</div>
</div>

<a name="initialize_call_stack"></a><a name="Topic358"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">initialize_call_stack</div>
 <div id="NDPrototype358" class="NDPrototype"><div class="PSection PPlainSection"><span class="SHKeyword">procedure</span> initialize_call_stack</div></div>
 <div class="CBody"><p>Method to initialize the package. Is called during &lt;PIT_INTERNAL&gt; package initialization</p></div>
</div>

<a name="push_stack"></a><a name="Topic449"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">push_stack</div>
 <div id="NDPrototype449" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">function</span> push_stack(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_user_name&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span>,</td></tr><tr><td class="PName first">p_session_id&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span>,</td></tr><tr><td class="PName first">p_module&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span>,</td></tr><tr><td class="PName first">p_action&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span>,</td></tr><tr><td class="PName first">p_client_info&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span>,</td></tr><tr><td class="PName first">p_params&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> <a href="../../index.html#File:core/types/msg_params.tps:msg_params" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,133);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >msg_params</a>,</td></tr><tr><td class="PName first">p_trace_level&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> <span class="SHKeyword">binary_integer</span>,</td></tr><tr><td class="PName first">p_trace_context&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> pit_context_type</td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div><div class="PSection PPlainSection"><span class="SHKeyword">return</span> <a href="../../index.html#File:core/types/pit_call_stack_type.tps:pit_call_stack_type" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,122);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >pit_call_stack_type</a></div></div>
 <div class="CBody"><p>Method to push an entry to the call stack. Called from the &lt;ENTER&gt; method.</p><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">p_user_name<div class="CDLParameterType"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span></div></td><td class="CDLDefinition"><p>Name of the actually connected application user</p></td></tr><tr><td class="CDLEntry">p_session_id<div class="CDLParameterType"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span></div></td><td class="CDLDefinition"><p>Identifier for the session</p></td></tr><tr><td class="CDLEntry">p_action<div class="CDLParameterType"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span></div></td><td class="CDLDefinition"><p>Method of the module that was called</p></td></tr><tr><td class="CDLEntry">p_client_info<div class="CDLParameterType"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span></div></td><td class="CDLDefinition"><p>Optional client info passed in as a pararameter to &lt;ENTER&gt;</p></td></tr><tr><td class="CDLEntry">p_params<div class="CDLParameterType"><span class="SHKeyword">in</span> <a href="../../index.html#File:core/types/msg_params.tps:msg_params" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,133);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >msg_params</a></div></td><td class="CDLDefinition"><p>Parameter list of parameters passed to the method</p></td></tr><tr><td class="CDLEntry">p_trace_level<div class="CDLParameterType"><span class="SHKeyword">in</span> <span class="SHKeyword">binary_integer</span></div></td><td class="CDLDefinition"><p>Trace level of the entry</p></td></tr><tr><td class="CDLEntry">p_trace_settings</td><td class="CDLDefinition"><p>In case of toggles trace settings may change. The new settings are passed in here</p></td></tr></table><div class="CHeading">Returns</div><p>Instance of <a href="../../index.html#File:core/types/pit_call_stack_type.tps:pit_call_stack_type" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,122);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >PIT_CALL_STACK_TYPE</a>, as this method may only return the entry pushed onto the stack</p></div>
</div>

<a name="pop_stack"></a><a name="Topic450"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">pop_stack</div>
 <div id="NDPrototype450" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">function</span> pop_stack(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_params&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> <a href="../../index.html#File:core/types/msg_params.tps:msg_params" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,133);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >msg_params</a>,</td></tr><tr><td class="PName first">p_severity&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> <span class="SHKeyword">binary_integer</span></td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div><div class="PSection PPlainSection"><span class="SHKeyword">return</span> <a href="../../index.html#SQLClass:pit_call_stack:pit_call_stack_tab" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,446);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >pit_call_stack_tab</a></div></div>
 <div class="CBody"><p>Method to pop one or more entries from the call stack. Called from &lt;LEAVE&gt;-method.</p><div class="CHeading">Parameter</div><table class="CDefinitionList"><tr><td class="CDLEntry">p_params<div class="CDLParameterType"><span class="SHKeyword">in</span> <a href="../../index.html#File:core/types/msg_params.tps:msg_params" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,133);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >msg_params</a></div></td><td class="CDLDefinition"><p>Parameter list of parameters passed to the method</p></td></tr><tr><td class="CDLEntry">p_severity<div class="CDLParameterType"><span class="SHKeyword">in</span> <span class="SHKeyword">binary_integer</span></div></td><td class="CDLDefinition"><p>Severity of the call. If level FATAL, it will completely empty the stack, if level ERROR, it will try to find the entry with the actual name and delete the stack up to this entry, in every other case it will simply remove the last entry.</p></td></tr></table><div class="CHeading">Returns</div><p>List of instances of <a href="../../index.html#File:core/types/pit_call_stack_type.tps:pit_call_stack_type" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,122);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >pit_call_stack_type</a>, as this method may pop more than one entry from the stack.</p></div>
</div>

<a name="long_op"></a><a name="Topic451"></a><div class="CTopic TFunction LSQL last">
 <div class="CTitle">long_op</div>
 <div id="NDPrototype451" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">procedure</span> long_op(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_sofar&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> <span class="SHKeyword">number</span>,</td></tr><tr><td class="PName first">p_total&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> <span class="SHKeyword">number</span>,</td></tr><tr><td class="PName first">p_target&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span>,</td></tr><tr><td class="PName first">p_units&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span>,</td></tr><tr><td class="PName first">p_op_name&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span></td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Sets dbms_application_info.</p><p>Use this procedure to pass information about long operations to the database. If this task is completed, call this procedure with</p><pre class="CCode">p_sofar = p_total (<span class="SHKeyword">or</span> p_sofar = <span class="SHNumber">100</span>)</pre><p>to allow for proper state cleansing.</p><p>If you call <a href="../../index.html#SQLClass:PIT:handle_exception" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,596);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >pit.HANDLE_EXCEPTION</a> or <a href="../../index.html#SQLClass:PIT:stop" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,597);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >pit.STOP</a>, the state will be cleaned as well.&nbsp; This method will work only if tracing is enabled, as it takes the method name from the call stack and persist the actual index with the call stack.</p><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">p_sofar<div class="CDLParameterType"><span class="SHKeyword">in</span> <span class="SHKeyword">number</span></div></td><td class="CDLDefinition"><p>Percentage of the task completed (0 .. 100 or individual scale)</p></td></tr><tr><td class="CDLEntry">p_total<div class="CDLParameterType"><span class="SHKeyword">in</span> <span class="SHKeyword">number</span></div></td><td class="CDLDefinition"><p>Amount of work to be done</p></td></tr><tr><td class="CDLEntry">p_target<div class="CDLParameterType"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span></div></td><td class="CDLDefinition"><p>Description of the operation</p></td></tr><tr><td class="CDLEntry">p_units<div class="CDLParameterType"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span></div></td><td class="CDLDefinition"><p>Unit of work, eg. &quot;rows processed&quot; or similar</p></td></tr><tr><td class="CDLEntry">p_op_name<div class="CDLParameterType"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span></div></td><td class="CDLDefinition"><p>Actual action. Either passed in manually or taken from the method name</p></td></tr></table></div>
</div>

</body></html>