<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>MAIL</title><link rel="stylesheet" type="text/css" href="../../../../styles/main.css" /><script type="text/javascript" src="../../../../styles/main.js"></script><script type="text/javascript">NDLoader.LoadJS("Content", "../../../../styles/");</script></head>

<!-- Generated by Natural Docs, version 2.1.1 -->

<!-- saved from url=(0016)http://localhost -->

<body onload="NDLoader.OnLoad('Content');" class="NDPage NDContentPage">

<a name="Topic662"></a><div class="CTopic TClass LSQL first">
 <div class="CTitle"><span class="Qualifier">Output Modules.&#8203;PIT_MAIL.</span>&#8203;MAIL</div>
 <div class="CBody"><p>Package to wrap sending mails via UTL_SMTP</p><div class="CHeading">Author</div><p>Juergen Sieben, ConDeS GmbH</p></div>
</div>

<a name="Public_Types"></a><a name="Topic663"></a><div class="CTopic TGroup LSQL">
 <div class="CTitle">Public Types</div>
</div>

<a name="address_rec"></a><a name="Topic664"></a><div class="CTopic TType LSQL">
 <div class="CTitle">address_rec</div>
 <div class="CBody"><p>Record to store a user name and its email address</p><div class="CHeading">Attributes</div><table class="CDefinitionList"><tr><td class="CDLEntry">user_name</td><td class="CDLDefinition"><p>Name of the user to send the email to</p></td></tr><tr><td class="CDLEntry">email</td><td class="CDLDefinition"><p>Email address</p></td></tr></table></div>
</div>

<a name="address_tab"></a><a name="Topic665"></a><div class="CTopic TType LSQL">
 <div class="CTitle">address_tab</div>
 <div class="CBody"><p>Nested table of <a href="../../../../index.html#SQLClass:Output_Modules.PIT_MAIL.MAIL:address_rec" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,664);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >address_rec</a>.</p></div>
</div>

<a name="Public_Methods"></a><a name="Topic816"></a><div class="CTopic TGroup LSQL">
 <div class="CTitle">Public Methods</div>
</div>

<a name="pkg_is_working"></a><a name="Topic666"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">pkg_is_working</div>
 <div id="NDPrototype666" class="NDPrototype"><div class="PSection PPlainSection"><span class="SHKeyword">function</span> pkg_is_working</div><div class="PSection PPlainSection"><span class="SHKeyword">return</span> <span class="SHKeyword">boolean</span></div></div>
 <div class="CBody"><p>Getter to retrieve the package status.</p><p>Is used to check whether the package works as expected. This is checked based on whether</p><ul><li><p>the required ACL to contact the mail server is available</p></li><li><p>the mail server can be contacted and logged on</p></li></ul><div class="CHeading">Returns</div><p>TRUE if the package is working normally, FALSE otherwise</p></div>
</div>

<a name="set_credentials"></a><a name="Topic667"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">set_credentials</div>
 <div id="NDPrototype667" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">procedure</span> set_credentials(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_host&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span>,</td></tr><tr><td class="PName first">p_port&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> <span class="SHKeyword">pls_integer</span>,</td></tr><tr><td class="PName first">p_user&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span>,</td></tr><tr><td class="PName first">p_password&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span></td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Method encodes confidential data. The method encodes the given parameters and stores them at parameter &lt;PIT_MAIL_CREDENTIALS&gt;</p><div class="CHeading">CAVEAT</div><p>This is anything but secure. If in a sensitive environment, rather set up a SMTP relay</p><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">p_host<div class="CDLParameterType"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span></div></td><td class="CDLDefinition"><p>Mail server to send mails to</p></td></tr><tr><td class="CDLEntry">p_host<div class="CDLParameterType"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span></div></td><td class="CDLDefinition"><p>Port of the Mail server</p></td></tr><tr><td class="CDLEntry">p_user<div class="CDLParameterType"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span></div></td><td class="CDLDefinition"><p>Username at the mail server</p></td></tr><tr><td class="CDLEntry">p_password<div class="CDLParameterType"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span></div></td><td class="CDLDefinition"><p>Password of the user</p></td></tr></table></div>
</div>

<a name="send_mail"></a><a name="Topic668"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">send_mail</div>
 <div id="NDPrototype668" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">procedure</span> send_mail(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_sender&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span>,</td></tr><tr><td class="PName first">p_recipients&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> <a href="../../../../index.html#SQLClass:Output_Modules.PIT_MAIL.MAIL:address_tab" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,665);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >mail.address_tab</a>,</td></tr><tr><td class="PName first">p_cc_recipients&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> <a href="../../../../index.html#SQLClass:Output_Modules.PIT_MAIL.MAIL:address_tab" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,665);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >mail.address_tab</a>,</td></tr><tr><td class="PName first">p_subject&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span>,</td></tr><tr><td class="PName first">p_message&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span>,</td></tr><tr><td class="PName first">p_file_name&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span>,</td></tr><tr><td class="PName first">p_mime_type&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span>,</td></tr><tr><td class="PName first">p_attachment&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> <span class="SHKeyword">blob</span></td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Method sends mails including attachments.</p><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">p_sender<div class="CDLParameterType"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span></div></td><td class="CDLDefinition"><p>Sender of the mail. The address can be in the form <a href="#" onclick="javascript:location.href='ma\u0069'+'lto\u003a'+'f'+'oo'+'\u0040'+'serv'+'er\u002ede';return false;">f<span style="display: none">[xxx]</span>oo<span>&#64;</span>serv<span style="display: none">[xxx]</span>er&#46;de</a> or &quot;Willi Schmitz&quot;&lt;<a href="#" onclick="javascript:location.href='ma\u0069'+'lto\u003a'+'f'+'oo'+'\u0040'+'serv'+'er\u002ede';return false;">f<span style="display: none">[xxx]</span>oo<span>&#64;</span>serv<span style="display: none">[xxx]</span>er&#46;de</a>&gt;.</p></td></tr><tr><td class="CDLEntry">p_recipients<div class="CDLParameterType"><span class="SHKeyword">in</span> <a href="../../../../index.html#SQLClass:Output_Modules.PIT_MAIL.MAIL:address_tab" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,665);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >mail.address_tab</a></div></td><td class="CDLDefinition"><p>Instance of the nested table MAIL.ADDRESS_TAB with the structure &lt;USER_NAME&gt;|&lt;EMAIL&gt;.&nbsp; The email can be passed analogous to P_SENDER, the username is the username associated with the mail address.</p></td></tr><tr><td class="CDLEntry">p_cc_recipients<div class="CDLParameterType"><span class="SHKeyword">in</span> <a href="../../../../index.html#SQLClass:Output_Modules.PIT_MAIL.MAIL:address_tab" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,665);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >mail.address_tab</a></div></td><td class="CDLDefinition"><p>Instance of the nested table MAIL.ADDRESS_TAB with the structure &lt;USER_NAME&gt;|&lt;EMAIL&gt;.&nbsp; The email can be passed analogous to P_SENDER, the username is the username associated with the mail address</p></td></tr><tr><td class="CDLEntry">p_subject<div class="CDLParameterType"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span></div></td><td class="CDLDefinition"><p>Subject of the mail. Maximum length is 1000 characters (recommended: 78 characters)</p></td></tr><tr><td class="CDLEntry">p_message<div class="CDLParameterType"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span></div></td><td class="CDLDefinition"><p>Content of the mail. Maximum length of the mail is 32KByte.</p></td></tr><tr><td class="CDLEntry">p_fil_ename</td><td class="CDLDefinition"><p>Name of the file in which the attachment should be transferred.</p></td></tr><tr><td class="CDLEntry">p_fmime_type</td><td class="CDLDefinition"><p>Mime-Type of the attachment, such as text/html, application/pdf and so on</p></td></tr><tr><td class="CDLEntry">p_attachment<div class="CDLParameterType"><span class="SHKeyword">in</span> <span class="SHKeyword">blob</span></div></td><td class="CDLDefinition"><p>BLOB of the attachment.</p></td></tr></table></div>
</div>

<a name="send_mail(2)"></a><a name="Topic669"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">send_mail</div>
 <div id="NDPrototype669" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">procedure</span> send_mail(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_sender&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span>,</td></tr><tr><td class="PName first">p_recipients&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> <a href="../../../../index.html#SQLClass:Output_Modules.PIT_MAIL.MAIL:address_tab" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,665);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >mail.address_tab</a>,</td></tr><tr><td class="PName first">p_cc_recipients&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> <a href="../../../../index.html#SQLClass:Output_Modules.PIT_MAIL.MAIL:address_tab" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,665);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >mail.address_tab</a>,</td></tr><tr><td class="PName first">p_subject&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span>,</td></tr><tr><td class="PName first">p_message&nbsp;</td><td class="PType last"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span></td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Method sends mails without attachments.</p><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">p_sender<div class="CDLParameterType"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span></div></td><td class="CDLDefinition"><p>Sender of the mail. The address can be in the form <a href="#" onclick="javascript:location.href='ma\u0069'+'lto\u003a'+'f'+'oo'+'\u0040'+'serv'+'er\u002ede';return false;">f<span style="display: none">[xxx]</span>oo<span>&#64;</span>serv<span style="display: none">[xxx]</span>er&#46;de</a> or &quot;Willi Schmitz&quot;&lt;<a href="#" onclick="javascript:location.href='ma\u0069'+'lto\u003a'+'f'+'oo'+'\u0040'+'serv'+'er\u002ede';return false;">f<span style="display: none">[xxx]</span>oo<span>&#64;</span>serv<span style="display: none">[xxx]</span>er&#46;de</a>&gt;.</p></td></tr><tr><td class="CDLEntry">p_recipients<div class="CDLParameterType"><span class="SHKeyword">in</span> <a href="../../../../index.html#SQLClass:Output_Modules.PIT_MAIL.MAIL:address_tab" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,665);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >mail.address_tab</a></div></td><td class="CDLDefinition"><p>Instance of the nested table MAIL.ADDRESS_TAB with the structure &lt;USER_NAME&gt;|&lt;EMAIL&gt;.&nbsp; The email can be passed analogous to P_SENDER, the username is the username associated with the mail address.</p></td></tr><tr><td class="CDLEntry">p_cc_recipients<div class="CDLParameterType"><span class="SHKeyword">in</span> <a href="../../../../index.html#SQLClass:Output_Modules.PIT_MAIL.MAIL:address_tab" target="_top" onmouseover="NDContentPage.OnLinkMouseOver(event,665);" onmouseout="NDContentPage.OnLinkMouseOut(event);" >mail.address_tab</a></div></td><td class="CDLDefinition"><p>Instance of the nested table MAIL.ADDRESS_TAB with the structure &lt;USER_NAME&gt;|&lt;EMAIL&gt;.&nbsp; The email can be passed analogous to P_SENDER, the username is the username associated with the mail address</p></td></tr><tr><td class="CDLEntry">p_subject<div class="CDLParameterType"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span></div></td><td class="CDLDefinition"><p>Subject of the mail. Maximum length is 1000 characters (recommended: 78 characters)</p></td></tr><tr><td class="CDLEntry">p_message<div class="CDLParameterType"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span></div></td><td class="CDLDefinition"><p>Content of the mail. Maximum length of the mail is 32KByte.</p></td></tr></table></div>
</div>

<a name="send_mail(3)"></a><a name="Topic670"></a><div class="CTopic TFunction LSQL">
 <div class="CTitle">send_mail</div>
 <div id="NDPrototype670" class="NDPrototype WideForm"><div class="PSection PParameterSection PascalStyle"><table><tr><td class="PBeforeParameters"><span class="SHKeyword">procedure</span> send_mail(</td><td class="PParametersParentCell"><table class="PParameters"><tr><td class="PName first">p_sender&nbsp;</td><td class="PType"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span>,</td><td></td><td class="last"></td></tr><tr><td class="PName first">p_recipient&nbsp;</td><td class="PType"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span>,</td><td></td><td class="last"></td></tr><tr><td class="PName first">p_subject&nbsp;</td><td class="PType"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span>,</td><td></td><td class="last"></td></tr><tr><td class="PName first">p_message&nbsp;</td><td class="PType"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span>,</td><td></td><td class="last"></td></tr><tr><td class="PName first">p_file_name&nbsp;</td><td class="PType"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span></td><td class="PDefaultValueSeparator">&nbsp;<span class="SHKeyword">default</span>&nbsp;</td><td class="PDefaultValue last"><span class="SHKeyword">null</span>,</td></tr><tr><td class="PName first">p_mime_type&nbsp;</td><td class="PType"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span></td><td class="PDefaultValueSeparator">&nbsp;<span class="SHKeyword">default</span>&nbsp;</td><td class="PDefaultValue last"><span class="SHKeyword">null</span>,</td></tr><tr><td class="PName first">p_attachment&nbsp;</td><td class="PType"><span class="SHKeyword">in</span> <span class="SHKeyword">blob</span></td><td class="PDefaultValueSeparator">&nbsp;<span class="SHKeyword">default</span>&nbsp;</td><td class="PDefaultValue last"><span class="SHKeyword">null</span></td></tr></table></td><td class="PAfterParameters">)</td></tr></table></div></div>
 <div class="CBody"><p>Sends mails including attachments. Overload for simplified use.</p><div class="CHeading">Parameters</div><table class="CDefinitionList"><tr><td class="CDLEntry">p_sender<div class="CDLParameterType"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span></div></td><td class="CDLDefinition"><p>Sender of the mail. The address can be transferred in the form <a href="#" onclick="javascript:location.href='ma\u0069'+'lto\u003a'+'f'+'oo'+'\u0040'+'serv'+'er\u002ede';return false;">f<span style="display: none">[xxx]</span>oo<span>&#64;</span>serv<span style="display: none">[xxx]</span>er&#46;de</a> or &quot;Willi Schmitz&quot;&lt;<a href="#" onclick="javascript:location.href='ma\u0069'+'lto\u003a'+'f'+'oo'+'\u0040'+'serv'+'er\u002ede';return false;">f<span style="display: none">[xxx]</span>oo<span>&#64;</span>serv<span style="display: none">[xxx]</span>er&#46;de</a>&gt;.</p></td></tr><tr><td class="CDLEntry">p_recipient<div class="CDLParameterType"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span></div></td><td class="CDLDefinition"><p>Single address to which the mail should be sent.</p></td></tr><tr><td class="CDLEntry">p_subject<div class="CDLParameterType"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span></div></td><td class="CDLDefinition"><p>Subject of the mail. Maximum length is 1000 characters (recommended: 78 characters)</p></td></tr><tr><td class="CDLEntry">p_message<div class="CDLParameterType"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span></div></td><td class="CDLDefinition"><p>Content of the mail. Maximum length of the mail: 32KByte.</p></td></tr><tr><td class="CDLEntry">p_file_name<div class="CDLParameterType"><span class="SHKeyword">in</span> <span class="SHKeyword">varchar2</span></div></td><td class="CDLDefinition"><p>Optional name of the fattachment file.</p></td></tr><tr><td class="CDLEntry">p_filename</td><td class="CDLDefinition"><p>Optional mime-Type of the attachment, such as text/html, application/pdf and so on</p></td></tr><tr><td class="CDLEntry">p_attachment<div class="CDLParameterType"><span class="SHKeyword">in</span> <span class="SHKeyword">blob</span></div></td><td class="CDLDefinition"><p>Optional BLOB of the attachment. If not NULL P_FILENAME and P_MIME_TYPE are required</p></td></tr></table></div>
</div>

<a name="initialize"></a><a name="Topic671"></a><div class="CTopic TFunction LSQL last">
 <div class="CTitle">initialize</div>
 <div id="NDPrototype671" class="NDPrototype"><div class="PSection PPlainSection"><span class="SHKeyword">procedure</span> initialize</div></div>
 <div class="CBody"><p>Initialization method</p></div>
</div>

</body></html>